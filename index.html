<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SamTech Tournament Manager Pro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --success: #2ecc71;
      --warning: #f39c12;
      --danger: #e74c3c;
      --info: #1abc9c;
      --light: #ecf0f1;
      --dark: #2c3e50;
      --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #f8f9fa;
      color: #333;
      padding-bottom: 2rem;
    }
    
    .navbar-brand {
      font-weight: 700;
      color: var(--primary);
    }
    
    .dashboard-card {
      background: white;
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      height: 100%;
    }
    
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    .card-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--secondary);
    }
    
    .btn-action {
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      transition: var(--transition);
    }
    
    .btn-action:hover {
      transform: translateY(-2px);
    }
    
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-top: 15px;
    }
    
    .calendar-day {
      border: 1px solid #e9ecef;
      min-height: 100px;
      padding: 8px;
      border-radius: 8px;
      background: white;
      transition: var(--transition);
    }
    
    .calendar-day:hover {
      background: #f8f9fa;
    }
    
    .calendar .header {
      background: var(--primary);
      color: white;
      font-weight: bold;
      text-align: center;
      padding: 10px 0;
      border-radius: 6px;
    }
    
    .fixture-item {
      font-size: 0.75rem;
      background: #e8f4fc;
      margin: 3px 0;
      padding: 5px;
      border-radius: 4px;
      border-left: 3px solid var(--secondary);
    }
    
    .modal-content {
      border-radius: 12px;
      overflow: hidden;
    }
    
    .modal-header {
      background: var(--primary);
      color: white;
    }
    
    .stats-number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .stats-label {
      font-size: 0.9rem;
      color: #6c757d;
    }
    
    .team-badge {
      background: var(--light);
      padding: 5px 12px;
      border-radius: 20px;
      display: inline-block;
      margin: 3px;
      font-weight: 500;
    }
    
    .tournament-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 2rem 0;
      margin-bottom: 2rem;
      border-radius: 0 0 20px 20px;
    }
    
    .feature-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 1.5rem;
    }
    
   
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .alert {
      animation: slideIn 0.3s ease;
      border: none;
      border-radius: 8px;
    }
    
  
    .fixture-creation-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--card-shadow);
      margin-bottom: 1.5rem;
    }
    
    .team-selector {
      border: 1px solid #ced4da;
      border-radius: 8px;
      padding: 10px;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .team-selector label {
      display: block;
      padding: 5px;
      margin: 3px 0;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .team-selector label:hover {
      background-color: #f8f9fa;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .btn-action {
        width: 100%;
        margin-bottom: 10px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <header class="tournament-header">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="display-4 fw-bold"><i class="fa-solid fa-trophy me-3"></i>Tournament Manager Pro</h1>
          <p class="lead">Professional tournament management system for leagues and competitions</p>
        </div>
        <div class="col-md-4 text-md-end">
          <div class="btn-group">
            <button class="btn btn-outline-light" id="helpBtn"><i class="fa-solid fa-circle-question me-1"></i> Help</button>
            <button class="btn btn-outline-light" id="exportBtn"><i class="fa-solid fa-download me-1"></i> Export</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- Stats Overview -->
    <div class="row mb-4">
      <div class="col-md-3 col-6 mb-3">
        <div class="dashboard-card text-center p-3">
          <div class="stats-number" id="teamsCount">0</div>
          <div class="stats-label">Teams Registered</div>
        </div>
      </div>
      <div class="col-md-3 col-6 mb-3">
        <div class="dashboard-card text-center p-3">
          <div class="stats-number" id="fixturesCount">0</div>
          <div class="stats-label">Fixtures Scheduled</div>
        </div>
      </div>
      <div class="col-md-3 col-6 mb-3">
        <div class="dashboard-card text-center p-3">
          <div class="stats-number" id="completedCount">0</div>
          <div class="stats-label">Matches Completed</div>
        </div>
      </div>
      <div class="col-md-3 col-6 mb-3">
        <div class="dashboard-card text-center p-3">
          <div class="stats-number" id="pendingCount">0</div>
          <div class="stats-label">Matches Pending</div>
        </div>
      </div>
    </div>

    <!-- Action Buttons (styled by Mercy) -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="dashboard-card p-4">
          <h4 class="mb-4 text-center">Tournament Management</h4>
          <div class="d-flex gap-2 flex-wrap justify-content-center action-buttons">
            <button class="btn btn-success btn-action" data-bs-toggle="modal" data-bs-target="#registerModal">
              <i class="fa-solid fa-plus me-2"></i>Register Team
            </button>
            <button class="btn btn-primary btn-action" data-bs-toggle="modal" data-bs-target="#fixturesModal">
              <i class="fa-solid fa-list me-2"></i>View Fixtures
            </button>
            <button class="btn btn-warning btn-action" data-bs-toggle="modal" data-bs-target="#resultsModal">
              <i class="fa-solid fa-pen-to-square me-2"></i>Enter Results
            </button>
            <button class="btn btn-info btn-action" data-bs-toggle="modal" data-bs-target="#standingsModal">
              <i class="fa-solid fa-table me-2"></i>View Standings
            </button>
            <button class="btn btn-secondary btn-action" data-bs-toggle="modal" data-bs-target="#calendarModal">
              <i class="fa-solid fa-calendar-days me-2"></i>Calendar
            </button>
            <button class="btn btn-dark btn-action" data-bs-toggle="modal" data-bs-target="#createFixtureModal">
              <i class="fa-solid fa-plus-circle me-2"></i>Create Fixture
            </button>
            <button id="resetBtn" class="btn btn-danger btn-action">
              <i class="fa-solid fa-rotate-left me-2"></i>Reset Tournament
            </button>
            <button id="loadTestBtn" class="btn btn-dark btn-action">
              <i class="fa-solid fa-vial me-2"></i>Load Test Data
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Alerts (by Mercy) -->
    <div id="alertPlaceholder"></div>

    <!-- Registered Teams -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="dashboard-card p-4">
          <h4 class="mb-3">Registered Teams</h4>
          <div id="teamsList">
            <p class="text-muted text-center">No teams registered yet</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Results -->
    <div class="row">
      <div class="col-md-6 mb-4">
        <div class="dashboard-card p-4">
          <h4 class="mb-3">Recent Results</h4>
          <div id="recentResults">
            <p class="text-muted text-center">No results available</p>
          </div>
        </div>
      </div>
      
      <!-- Upcoming Matches (written by Benard) -->
      <div class="col-md-6 mb-4">
        <div class="dashboard-card p-4">
          <h4 class="mb-3">Upcoming Matches</h4>
          <div id="upcomingMatches">
            <p class="text-muted text-center">No upcoming matches</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Register Team Modal (Samwa's idea) -->
  <div class="modal fade" id="registerModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fa-solid fa-user-plus me-2"></i>Register Team</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="teamName" class="form-label">Team Name</label>
            <input type="text" id="teamName" class="form-control" placeholder="Enter team name">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button id="addTeamBtn" class="btn btn-success">Add Team</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Fixture Modal (Fidel's idea) -->
  <div class="modal fade" id="createFixtureModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fa-solid fa-plus-circle me-2"></i>Create Fixture</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-5">
              <h6>Select Teams</h6>
              <div class="team-selector" id="teamSelector">
                <!--  (impleted by Samwa) -->
              </div>
            </div>
            <div class="col-md-7">
              <h6>Fixture Details</h6>
              <div class="mb-3">
                <label class="form-label">Selected Teams</label>
                <div id="selectedTeams" class="bg-light p-2 rounded mb-3">
                  <span class="text-muted">No teams selected</span>
                </div>
              </div>
              <div class="mb-3">
                <label for="fixtureDate" class="form-label">Match Date</label>
                <input type="date" id="fixtureDate" class="form-control">
              </div>
              <div class="mb-3">
                <label for="fixtureTime" class="form-label">Match Time</label>
                <input type="time" id="fixtureTime" class="form-control" value="15:00">
              </div>
              <div class="mb-3">
                <label for="fixtureLocation" class="form-label">Location (optional)</label>
                <input type="text" id="fixtureLocation" class="form-control" placeholder="Enter venue name">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button id="createFixtureBtn" class="btn btn-success">Create Fixture</button>
        </div>
      </div>
    </div>
  </div>

 
  <div class="modal fade" id="fixturesModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fa-solid fa-list me-2"></i>Fixtures</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Match</th>
                  <th>Date</th>
                  <th>Time</th>
                  <th>Location</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="fixturesList"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="resultsModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fa-solid fa-pen-to-square me-2"></i>Enter Results</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="fixtureSelect" class="form-label">Select Match</label>
            <select id="fixtureSelect" class="form-select mb-3"></select>
          </div>
          <div class="row mb-3">
            <div class="col-5">
              <input type="number" id="scoreA" class="form-control" placeholder="Score Team A" min="0">
            </div>
            <div class="col-2 text-center">VS</div>
            <div class="col-5">
              <input type="number" id="scoreB" class="form-control" placeholder="Score Team B" min="0">
            </div>
          </div>
          <button id="saveResultBtn" class="btn btn-warning w-100">Save Result</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="standingsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fa-solid fa-table me-2"></i>Standings</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-striped">
              <thead class="table-dark">
                <tr>
                  <th>Position</th>
                  <th>Team</th>
                  <th>MP</th>
                  <th>W</th>
                  <th>D</th>
                  <th>L</th>
                  <th>GF</th>
                  <th>GA</th>
                  <th>GD</th>
                  <th>Pts</th>
                </tr>
              </thead>
              <tbody id="standingsTable"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="calendarModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="fa-solid fa-calendar-days me-2"></i>Tournament Calendar</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <button class="btn btn-sm btn-outline-primary" id="prevMonth"><i class="fa-solid fa-chevron-left"></i></button>
            <h5 id="currentMonth">September 2025</h5>
            <button class="btn btn-sm btn-outline-primary" id="nextMonth"><i class="fa-solid fa-chevron-right"></i></button>
          </div>
          <div id="calendar" class="calendar"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let teams = JSON.parse(localStorage.getItem("teams")) || [];
    let fixtures = JSON.parse(localStorage.getItem("fixtures")) || [];
    let results = JSON.parse(localStorage.getItem("results")) || [];
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    const alertPlaceholder = document.getElementById("alertPlaceholder");
    const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

    function showAlert(message, type = "info") {
 
    const alertHTML = `
        <div class="modal fade" id="alertModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
            <div class="modal-body text-center p-4">
                <i class="fa-solid fa-${type === 'success' ? 'circle-check' : type === 'danger' ? 'circle-exclamation' : 'circle-info'} text-${type} display-4 mb-3"></i>
                <p class="mb-0">${message}</p>
            </div>
            <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-${type}" data-bs-dismiss="modal">OK</button>
            </div>
            </div>
        </div>
        </div>
    `;
    
    
    const existingModal = document.getElementById('alertModal');
    if (existingModal) {
        existingModal.remove();
    }
   
    document.body.insertAdjacentHTML('beforeend', alertHTML);
    
   
    const modalElement = document.getElementById('alertModal');
    const modal = new bootstrap.Modal(modalElement);
    modal.show();
    
    modalElement.addEventListener('hidden.bs.modal', () => {
        modalElement.remove();
    });
    
 
    document.querySelectorAll(".modal.show").forEach(m => {
        if (m.id !== 'alertModal') {
        bootstrap.Modal.getInstance(m).hide();
        }
    });
    }


    function updateStats() {
      document.getElementById('teamsCount').textContent = teams.length;
      document.getElementById('fixturesCount').textContent = fixtures.length;
      document.getElementById('completedCount').textContent = results.filter(r => r).length;
      document.getElementById('pendingCount').textContent = fixtures.length - results.filter(r => r).length;
      
   
      const teamsList = document.getElementById('teamsList');
      if (teams.length > 0) {
        teamsList.innerHTML = teams.map(team => `<span class="team-badge">${team}</span>`).join('');
      } else {
        teamsList.innerHTML = '<p class="text-muted text-center">No teams registered yet</p>';
      }
      
     
      const recentResults = document.getElementById('recentResults');
      const completedFixtures = fixtures.filter((f, i) => results[i]);
      if (completedFixtures.length > 0) {
        recentResults.innerHTML = completedFixtures.slice(-5).map((f, i) => {
          const resultIndex = fixtures.findIndex(fix => fix.id === f.id);
          return `<div class="d-flex justify-content-between border-bottom pb-2 mb-2">
            <div>${f.teamA} vs ${f.teamB}</div>
            <div><strong>${results[resultIndex].scoreA} - ${results[resultIndex].scoreB}</strong></div>
          </div>`;
        }).join('');
      } else {
        recentResults.innerHTML = '<p class="text-muted text-center">No results available</p>';
      }
      
      const upcomingMatches = document.getElementById('upcomingMatches');
      const pendingFixtures = fixtures.filter((f, i) => !results[i]);
      if (pendingFixtures.length > 0) {
        upcomingMatches.innerHTML = pendingFixtures.slice(0, 5).map(f => `
          <div class="d-flex justify-content-between border-bottom pb-2 mb-2">
            <div>${f.teamA} vs ${f.teamB}</div>
            <div class="text-muted small">${f.date} at ${f.time}</div>
          </div>
        `).join('');
      } else {
        upcomingMatches.innerHTML = '<p class="text-muted text-center">No upcoming matches</p>';
      }
    }


    document.getElementById("addTeamBtn").addEventListener("click", () => {
      const name = document.getElementById("teamName").value.trim();
      if (!name) return showAlert("Team name required", "danger");
      if (teams.includes(name)) return showAlert("Team already registered!", "warning");
      teams.push(name);
      localStorage.setItem("teams", JSON.stringify(teams));
      generateFixtures();
      showAlert(`Team "${name}" added!`, "success");
      document.getElementById("teamName").value = "";
      updateStats();
      populateTeamSelector();
    });


    function generateFixtures() {
      fixtures = [];
      for (let i=0;i<teams.length;i++) {
        for (let j=i+1;j<teams.length;j++) {
          fixtures.push({
            id: `${Date.now()}-${i}-${j}`,
            teamA: teams[i],
            teamB: teams[j],
            date: new Date().toISOString().split("T")[0],
            time: "15:00",
            location: "Main Stadium"
          });
        }
      }
      localStorage.setItem("fixtures", JSON.stringify(fixtures));
      renderFixtures();
      renderCalendar();
      updateStats();
    }

 
    function createFixture(teamA, teamB, date, time, location = "Main Stadium") {
    
      if (!teamA || !teamB) {
        throw new Error("Both teams are required to create a fixture");
      }
      
      if (teamA === teamB) {
        throw new Error("A team cannot play against itself");
      }
      
      if (!date) {
        throw new Error("Date is required");
      }
      
    
      const fixtureExists = fixtures.some(f => 
        ((f.teamA === teamA && f.teamB === teamB) || 
         (f.teamA === teamB && f.teamB === teamA)) &&
        f.date === date
      );
      
      if (fixtureExists) {
        throw new Error("Fixture between these teams on this date already exists");
      }
      
    
      const newFixture = {
        id: `${Date.now()}-${teamA}-${teamB}`,
        teamA,
        teamB,
        date,
        time: time || "15:00",
        location: location || "Main Stadium"
      };
      
    
      fixtures.push(newFixture);
      localStorage.setItem("fixtures", JSON.stringify(fixtures));
      
     
      renderFixtures();
      renderCalendar();
      updateStats();
      
      return newFixture;
    }

   
    function populateTeamSelector() {
      const teamSelector = document.getElementById("teamSelector");
      teamSelector.innerHTML = "";
      
      if (teams.length < 2) {
        teamSelector.innerHTML = '<div class="text-center text-muted py-3">Need at least 2 teams to create a fixture</div>';
        document.getElementById("createFixtureBtn").disabled = true;
        return;
      }
      
      document.getElementById("createFixtureBtn").disabled = false;
      
      teams.forEach(team => {
        const label = document.createElement("label");
        label.className = "form-check";
        label.innerHTML = `
          <input type="checkbox" class="form-check-input team-checkbox" value="${team}">
          ${team}
        `;
        teamSelector.appendChild(label);
      });
      
     
      document.querySelectorAll(".team-checkbox").forEach(checkbox => {
        checkbox.addEventListener("change", updateSelectedTeams);
      });
    }

   
    function updateSelectedTeams() {
      const selectedTeams = Array.from(document.querySelectorAll(".team-checkbox:checked"))
        .map(checkbox => checkbox.value);
      
      const selectedTeamsDiv = document.getElementById("selectedTeams");
      
      if (selectedTeams.length < 2) {
        selectedTeamsDiv.innerHTML = '<span class="text-muted">Select at least 2 teams</span>';
        document.getElementById("createFixtureBtn").disabled = true;
      } else if (selectedTeams.length > 2) {
        selectedTeamsDiv.innerHTML = '<span class="text-muted">Select exactly 2 teams</span>';
        document.getElementById("createFixtureBtn").disabled = true;
      } else {
        selectedTeamsDiv.innerHTML = `
          <div class="d-flex justify-content-between">
            <span>${selectedTeams[0]}</span>
            <span class="mx-2">vs</span>
            <span>${selectedTeams[1]}</span>
          </div>
        `;
        document.getElementById("createFixtureBtn").disabled = false;
      }
    }

    
    document.getElementById("createFixtureBtn").addEventListener("click", () => {
      const selectedTeams = Array.from(document.querySelectorAll(".team-checkbox:checked"))
        .map(checkbox => checkbox.value);
      
      if (selectedTeams.length !== 2) {
        showAlert("Please select exactly 2 teams", "warning");
        return;
      }
      
      const date = document.getElementById("fixtureDate").value;
      const time = document.getElementById("fixtureTime").value;
      const location = document.getElementById("fixtureLocation").value;
      
      if (!date) {
        showAlert("Please select a date for the fixture", "warning");
        return;
      }
      
      try {
        createFixture(selectedTeams[0], selectedTeams[1], date, time, location);
        showAlert(`Fixture created: ${selectedTeams[0]} vs ${selectedTeams[1]}`, "success");
        
      
        document.querySelectorAll(".team-checkbox").forEach(cb => cb.checked = false);
        document.getElementById("fixtureDate").value = "";
        document.getElementById("fixtureTime").value = "15:00";
        document.getElementById("fixtureLocation").value = "";
        document.getElementById("selectedTeams").innerHTML = '<span class="text-muted">No teams selected</span>';
        
        
        const modal = bootstrap.Modal.getInstance(document.getElementById('createFixtureModal'));
        modal.hide();
      } catch (error) {
        showAlert(error.message, "danger");
      }
    });

    function renderFixtures() {
      const list = document.getElementById("fixturesList");
      list.innerHTML = "";
      
      if (fixtures.length === 0) {
        list.innerHTML = `<tr><td colspan="6" class="text-center py-3">No fixtures scheduled yet</td></tr>`;
        return;
      }
      
      fixtures.forEach((f, idx) => {
        const hasResult = results[idx];
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${f.teamA} vs ${f.teamB}</td>
          <td>${f.date}</td>
          <td>${f.time}</td>
          <td>${f.location || "TBD"}</td>
          <td><span class="badge ${hasResult ? 'bg-success' : 'bg-warning'}">${hasResult ? 'Completed' : 'Pending'}</span></td>
          <td>
            <button class="btn btn-sm btn-outline-danger" onclick="deleteFixture(${idx})">
              <i class="fa-solid fa-trash"></i>
            </button>
          </td>
        `;
        list.appendChild(tr);
      });
      
      const select = document.getElementById("fixtureSelect");
      select.innerHTML = fixtures.map((f,i)=>`<option value="${i}">${f.teamA} vs ${f.teamB} (${f.date})</option>`).join("");
    }

    
    function deleteFixture(index) {
      if (confirm("Are you sure you want to delete this fixture?")) {
        fixtures.splice(index, 1);
        results.splice(index, 1);
        localStorage.setItem("fixtures", JSON.stringify(fixtures));
        localStorage.setItem("results", JSON.stringify(results));
        renderFixtures();
        renderStandings();
        renderCalendar();
        updateStats();
        showAlert("Fixture deleted", "success");
      }
    }

    function updateFixtureDate(index, value) {
      fixtures[index].date = value;
      localStorage.setItem("fixtures", JSON.stringify(fixtures));
      renderCalendar();
    }
    
    function updateFixtureTime(index, value) {
      fixtures[index].time = value;
      localStorage.setItem("fixtures", JSON.stringify(fixtures));
      renderCalendar();
    }

    
    document.getElementById("saveResultBtn").addEventListener("click", () => {
      const idx = document.getElementById("fixtureSelect").value;
      const scoreA = parseInt(document.getElementById("scoreA").value);
      const scoreB = parseInt(document.getElementById("scoreB").value);
      if (isNaN(scoreA) || isNaN(scoreB)) return showAlert("Scores required", "danger");
      results[idx] = {scoreA, scoreB};
      localStorage.setItem("results", JSON.stringify(results));
      renderStandings();
      showAlert("Result saved!", "success");
      document.getElementById("scoreA").value = "";
      document.getElementById("scoreB").value = "";
      updateStats();
    });

    
    function renderStandings() {
      let table = {};
      teams.forEach(t => table[t] = {MP:0,W:0,D:0,L:0,GF:0,GA:0,GD:0,PTS:0});
      fixtures.forEach((f, i) => {
        if (!results[i]) return;
        let {scoreA, scoreB} = results[i];
        let A = table[f.teamA], B = table[f.teamB];
        A.MP++; B.MP++;
        A.GF += scoreA; A.GA += scoreB;
        B.GF += scoreB; B.GA += scoreA;
        if (scoreA > scoreB) {A.W++; B.L++; A.PTS+=3;}
        else if (scoreA < scoreB) {B.W++; A.L++; B.PTS+=3;}
        else {A.D++; B.D++; A.PTS++; B.PTS++;}
      });
      Object.values(table).forEach(t=>t.GD = t.GF - t.GA);
      let sorted = Object.entries(table).sort((a,b)=>b[1].PTS-a[1].PTS || b[1].GD-a[1].GD);
      const tbody = document.getElementById("standingsTable");
      tbody.innerHTML = sorted.map(([team, s], index)=>`
        <tr>
          <td>${index + 1}</td>
          <td>${team}</td>
          <td>${s.MP}</td>
          <td>${s.W}</td>
          <td>${s.D}</td>
          <td>${s.L}</td>
          <td>${s.GF}</td>
          <td>${s.GA}</td>
          <td>${s.GD}</td>
          <td><strong>${s.PTS}</strong></td>
        </tr>`).join("");
    }

  
    function renderCalendar() {
      const cal = document.getElementById("calendar");
      cal.innerHTML = "";
      const days = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
      days.forEach(d=>cal.innerHTML += `<div class="header">${d}</div>`);
      
    
      document.getElementById('currentMonth').textContent = `${monthNames[currentMonth]} ${currentYear}`;
      
      let first = new Date(currentYear, currentMonth, 1);
      let startDay = first.getDay();
      let daysInMonth = new Date(currentYear, currentMonth+1, 0).getDate();
      
      for (let i=0;i<startDay;i++) cal.innerHTML += "<div class='calendar-day'></div>";
      
      for (let d=1;d<=daysInMonth;d++) {
        let cell = document.createElement("div");
        cell.className = "calendar-day";
        cell.innerHTML = `<strong>${d}</strong>`;
        let dayStr = `${currentYear}-${String(currentMonth+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
        
        fixtures.filter(f=>f.date===dayStr).forEach(f=>{
          let div = document.createElement("div");
          div.className = "fixture-item";
          div.innerText = `${f.teamA} vs ${f.teamB} (${f.time})`;
          cell.appendChild(div);
        });
        
        cal.appendChild(cell);
      }
    }

   
    document.getElementById("prevMonth").addEventListener("click", () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar();
    });
    
    document.getElementById("nextMonth").addEventListener("click", () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar();
    });

    
    document.getElementById("resetBtn").addEventListener("click", () => {
      if (confirm("Are you sure you want to reset the tournament? All data will be lost.")) {
        localStorage.clear();
        teams=[];fixtures=[];results=[];
        renderFixtures();renderStandings();renderCalendar();
        showAlert("Tournament reset!", "warning");
        updateStats();
        populateTeamSelector();
      }
    });

   
    const testData = {
      teams: ["Lions FC","Tigers United","Eagles SC","Sharks FC"],
      fixtures: [
        {id: "0-1", teamA:"Lions FC",teamB:"Tigers United",date:"2025-09-01",time:"15:00", location: "Main Stadium"},
        {id: "2-3", teamA:"Eagles SC",teamB:"Sharks FC",date:"2025-09-02",time:"16:00", location: "Secondary Field"},
        {id: "0-2", teamA:"Lions FC",teamB:"Eagles SC",date:"2025-09-03",time:"17:00", location: "Main Stadium"},
        {id: "1-3", teamA:"Tigers United",teamB:"Sharks FC",date:"2025-09-04",time:"15:00", location: "Secondary Field"},
        {id: "0-3", teamA:"Lions FC",teamB:"Sharks FC",date:"2025-09-05",time:"16:00", location: "Main Stadium"},
        {id: "1-2", teamA:"Tigers United",teamB:"Eagles SC",date:"2025-09-06",time:"17:00", location: "Secondary Field"}
      ],
      results: [{scoreA:2,scoreB:1}, null, {scoreA:1,scoreB:1}, null, null, null]
    };

   
    document.getElementById("loadTestBtn").addEventListener("click", () => {
      if (confirm("Load test data? This will replace your current tournament data.")) {
        teams = testData.teams;
        fixtures = testData.fixtures;
        results = testData.results;
        localStorage.setItem("teams", JSON.stringify(teams));
        localStorage.setItem("fixtures", JSON.stringify(fixtures));
        localStorage.setItem("results", JSON.stringify(results));
        renderFixtures();renderStandings();renderCalendar();updateStats();populateTeamSelector();
        showAlert("Test data loaded!", "success");
      }
    });

 
    document.getElementById("helpBtn").addEventListener("click", () => {
      showAlert("Tournament Manager Pro helps you organize and manage your sports tournament. Register teams, schedule matches, enter results, and track standings.", "info");
    });

   
    document.getElementById("exportBtn").addEventListener("click", () => {
      /*
      const data = {
        teams: teams,
        fixtures: fixtures,
        results: results
      };
      const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 2));
      const downloadAnchorNode = document.createElement('a');
      downloadAnchorNode.setAttribute("href", dataStr);
      downloadAnchorNode.setAttribute("download", "tournament_data.json");
      document.body.appendChild(downloadAnchorNode);
      downloadAnchorNode.click();
      downloadAnchorNode.remove();
      showAlert("Tournament data exported successfully!", "success");
      */
      showAlert("This button will export all the tournament data as a JSON file.", "warning");
    });

  
    document.getElementById("fixtureDate").valueAsDate = new Date();

 
    renderFixtures();
    renderStandings();
    renderCalendar();
    updateStats();
    populateTeamSelector();

    function showDemoModeAlert() {

  const demoModalHTML = `
    <div class="modal fade" id="demoModeModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-info text-white">
            <h5 class="modal-title">
              <i class="fa-solid fa-flask me-2"></i>Demo Mode
            </h5>
          </div>
          <div class="modal-body">
            <div class="text-center mb-3">
              <i class="fa-solid fa-triangle-exclamation text-warning display-4"></i>
            </div>
            <p class="text-center mb-0">
              You are currently in demo mode. Some features may be limited or simulated for demonstration purposes.
            </p>
          </div>
          <div class="modal-footer justify-content-center">
            <button type="button" class="btn btn-info text-white" data-bs-dismiss="modal">
              I Understand
            </button>
          </div>
        </div>
      </div>
    </div>
  `;

 
  document.body.insertAdjacentHTML('beforeend', demoModalHTML);
  
  
  setTimeout(() => {
    const modalElement = document.getElementById('demoModeModal');
    const modal = new bootstrap.Modal(modalElement);
    modal.show();
    

    modalElement.addEventListener('hidden.bs.modal', () => {
      modalElement.remove();
    });
  }, 100);
}


document.addEventListener('DOMContentLoaded', function() {
  showDemoModeAlert();
});


  </script>
  
</body>
</html>